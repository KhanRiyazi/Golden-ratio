<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AffiliateMath AI Admin</title>
<style>
:root {
  --bg: #0f172a;
  --card: rgba(30, 41, 59, 0.8);
  --accent: #38bdf8;
  --accent-hover: #0ea5e9;
  --text: #f8fafc;
  --muted: #94a3b8;
  --radius: 1rem;
}
body {
  font-family: "Inter", system-ui, sans-serif;
  background: radial-gradient(circle at top left, #1e293b 0%, #0f172a 100%);
  color: var(--text);
  margin: 0; padding: 0;
  min-height: 100vh;
  display: flex; flex-direction: column; align-items: center;
}
header { text-align: center; padding: 2rem 1rem 1rem; }
header h1 {
  font-size: 2rem;
  background: linear-gradient(90deg, var(--accent), #22d3ee);
  -webkit-background-clip: text; color: transparent;
  animation: glow 3s ease-in-out infinite alternate;
}
@keyframes glow { from{ text-shadow:0 0 5px var(--accent);} to{ text-shadow:0 0 20px var(--accent-hover);} }
main { width: 90%; max-width: 950px; display: flex; flex-direction: column; gap: 2rem; margin-bottom: 2rem; }
.card {
  background: var(--card); border-radius: var(--radius); padding: 1.5rem;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.08);
}
h2 { color: var(--accent); text-shadow: 0 0 8px rgba(56,189,248,0.4); margin-top: 0; }
label { display:block; margin:0.75rem 0; }
input {
  width:100%; padding:0.6rem; border:none; border-radius:8px;
  margin-top:0.25rem; background:rgba(255,255,255,0.1); color:var(--text);
}
input:focus { outline:2px solid var(--accent); background:rgba(255,255,255,0.15);}
button {
  background:linear-gradient(135deg,var(--accent),#22d3ee);
  color:#0f172a; border:none; padding:0.6rem 1.2rem;
  border-radius:30px; font-weight:600; cursor:pointer;
  transition:all 0.3s ease; box-shadow:0 4px 15px rgba(56,189,248,0.5);
}
button:hover { transform:translateY(-3px) scale(1.02); background:linear-gradient(135deg,var(--accent-hover),#38bdf8);}
table { width:100%; border-collapse:collapse; margin-top:1rem; }
th,td { padding:0.75rem; text-align:left; border-bottom:1px solid rgba(255,255,255,0.1);}
th { color:var(--accent);}
tr:hover { background:rgba(255,255,255,0.05); transition:0.3s;}
.action-btn { background:none; border:none; color:var(--accent); cursor:pointer; font-size:1.2rem;}
footer { text-align:center; margin-top:1rem; color:var(--muted);}
</style>
</head>
<body>

<header>
  <h1>AffiliateMath AI Admin</h1>
  <p style="color:var(--muted)">Manage affiliate links ‚Äî Kaizen style ‚öôÔ∏è</p>
</header>

<main>
  <!-- Add Link Form -->
  <section class="card">
    <h2>‚ûï Add New Link</h2>
    <form method="post" action="/links">
      <label>Title<br><input name="title" required></label>
      <label>URL<br><input name="url" type="url" required placeholder="https://..."></label>
      <label>Slug<br><input name="slug" placeholder="optional"></label>
      <div style="margin-top:1rem;">
        <button type="submit">Add Link</button>
        <button type="button" id="aiSuggest">ü§ñ AI Suggest</button>
      </div>
    </form>
  </section>

  <!-- Existing Links -->
  <section class="card">
    <h2>üìú My Links ({{ total_links }})</h2>
    <table>
      <thead>
        <tr><th>ID</th><th>Title</th><th>Slug</th><th>Clicks</th><th>Actions</th></tr>
      </thead>
      <tbody>
      {% if links %}
        {% for link in links %}
        <tr id="row-{{ link.id }}">
          <td>{{ link.id }}</td>
          <td><a href="/{{ link.slug }}" target="_blank" style="color:var(--accent);">{{ link.title }}</a></td>
          <td>{{ link.slug }}</td>
          <td>{{ link.clicks|length }}</td>
          <td><button class="action-btn" onclick="deleteLink({{ link.id }})">üóëÔ∏è</button></td>
        </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="5" style="text-align:center;color:var(--muted)">No links yet.</td></tr>
      {% endif %}
      </tbody>
    </table>
  </section>
</main>

<footer><p>üîó <a href="/">Back to AffiliateMath.xyz</a></p></footer>

<script>
// Delete Link
async function deleteLink(id) {
  if (confirm("Delete this link?")) {
    const res = await fetch(`/links/${id}`, { method: "DELETE" });
    if (res.ok) document.getElementById(`row-${id}`).remove();
    else alert("Failed to delete link.");
  }
}

// AI Suggestion (mock, local)
document.getElementById("aiSuggest").addEventListener("click", async () => {
  const ideas = [
    "AI Tools Discount 2025",
    "Best Coding Courses",
    "Cloud Deals for Developers",
    "Boost Productivity Toolkit",
    "Next-Gen Learning Platform"
  ];
  const idea = ideas[Math.floor(Math.random() * ideas.length)];
  document.querySelector("input[name='title']").value = idea;
  document.querySelector("input[name='slug']").value = idea.toLowerCase().replace(/\s+/g, "-");
});
</script>

</body>
</html>
